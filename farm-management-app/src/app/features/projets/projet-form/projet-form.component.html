<div class="form-container">
  <div class="form-content">

    <!-- Header -->
    <div class="form-header">
      <div>
        <h1 class="form-title">
          {{ isEditMode ? '‚úèÔ∏è Modifier le Projet' : '‚ûï Nouveau Projet' }}
        </h1>
        <p class="form-subtitle">
          {{ isEditMode ? 'Modifiez les informations du projet' : 'Cr√©ez un nouveau projet agricole' }}
        </p>
      </div>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage" class="success-banner">
      ‚úÖ {{ successMessage }}
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="error-banner">
      ‚ö†Ô∏è {{ errorMessage }}
    </div>

    <!-- Form -->
    <form [formGroup]="projetForm" (ngSubmit)="onSubmit()" class="card form-card">

      <!-- Nom du Projet -->
      <div class="form-group">
        <label for="nom" class="form-label">
          Nom du Projet <span class="required">*</span>
        </label>
        <input
          type="text"
          id="nom"
          formControlName="nom"
          class="input-field"
          [class.input-error]="isFieldInvalid('nom')"
          placeholder="Ex: Culture de Tomates Bio 2024">
        <span *ngIf="isFieldInvalid('nom')" class="error-text">
          {{ getFieldError('nom') }}
        </span>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label for="description" class="form-label">
          Description <span class="required">*</span>
        </label>
        <textarea
          id="description"
          formControlName="description"
          class="input-field textarea-field"
          [class.input-error]="isFieldInvalid('description')"
          rows="4"
          placeholder="D√©crivez les objectifs et caract√©ristiques du projet..."></textarea>
        <span *ngIf="isFieldInvalid('description')" class="error-text">
          {{ getFieldError('description') }}
        </span>
      </div>

      <!-- Type de Culture -->
      <div class="form-group">
        <label for="typeCulture" class="form-label">
          Type de Culture <span class="required">*</span>
        </label>
        <input
          type="text"
          id="typeCulture"
          formControlName="typeCulture"
          class="input-field"
          [class.input-error]="isFieldInvalid('typeCulture')"
          placeholder="Ex: Tomates, Bl√©, Ma√Øs...">
        <span *ngIf="isFieldInvalid('typeCulture')" class="error-text">
          {{ getFieldError('typeCulture') }}
        </span>
      </div>

      <!-- Dates -->
      <div class="form-row">
        <div class="form-group">
          <label for="dateDebut" class="form-label">
            Date de D√©but <span class="required">*</span>
          </label>
          <input
            type="date"
            id="dateDebut"
            formControlName="dateDebut"
            class="input-field"
            [class.input-error]="isFieldInvalid('dateDebut')">
          <span *ngIf="isFieldInvalid('dateDebut')" class="error-text">
            {{ getFieldError('dateDebut') }}
          </span>
        </div>

        <div class="form-group">
          <label for="dateFin" class="form-label">
            Date de Fin <span class="required">*</span>
          </label>
          <input
            type="date"
            id="dateFin"
            formControlName="dateFin"
            class="input-field"
            [class.input-error]="isFieldInvalid('dateFin')">
          <span *ngIf="isFieldInvalid('dateFin')" class="error-text">
            {{ getFieldError('dateFin') }}
          </span>
        </div>
      </div>

      <!-- Statut -->
      <div class="form-group">
        <label for="statusProjet" class="form-label">
          Statut <span class="required">*</span>
        </label>
        <select
          id="statusProjet"
          formControlName="statusProjet"
          class="input-field"
          [class.input-error]="isFieldInvalid('statusProjet')">
          <option *ngFor="let status of statusOptions" [value]="status.value">
            {{ status.label }}
          </option>
        </select>
        <span *ngIf="isFieldInvalid('statusProjet')" class="error-text">
          {{ getFieldError('statusProjet') }}
        </span>
      </div>

      <!-- Actions -->
      <div class="form-actions">
        <button type="button" class="btn-outline" (click)="cancel()" [disabled]="isSubmitting">
          Annuler
        </button>
        <button type="submit" class="btn-primary" [disabled]="isSubmitting || projetForm.invalid">
          <span *ngIf="!isSubmitting">
            {{ isEditMode ? 'üíæ Enregistrer' : '‚ûï Cr√©er le Projet' }}
          </span>
          <span *ngIf="isSubmitting">
            ‚è≥ Enregistrement...
          </span>
        </button>
      </div>

    </form>

  </div>
</div>
